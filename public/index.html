<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Player</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #1a1a1a;
            color: white;
            overflow: hidden;
        }

        #splash {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            color: white;
        }

        .logo {
            font-size: 64px;
            font-weight: bold;
            margin-bottom: 30px;
            text-shadow: 2px 2px 8px rgba(0,0,0,0.3);
        }

        .app-title {
            font-size: 32px;
            font-weight: 600;
            margin-bottom: 40px;
            text-shadow: 1px 1px 4px rgba(0,0,0,0.3);
        }

        .loading {
            display: flex;
            gap: 12px;
            margin-top: 40px;
        }

        .loading-dot {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: white;
            animation: loading 1.4s infinite ease-in-out both;
        }

        .loading-dot:nth-child(1) { animation-delay: -0.32s; }
        .loading-dot:nth-child(2) { animation-delay: -0.16s; }

        @keyframes loading {
            0%, 80%, 100% { 
                transform: scale(0.8);
                opacity: 0.5;
            } 
            40% { 
                transform: scale(1.2);
                opacity: 1;
            }
        }

        .loading-text {
            margin-top: 20px;
            font-size: 16px;
            opacity: 0.9;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }

        #root {
            display: none;
            width: 100%;
            height: 100vh;
            background: #1a1a1a;
            color: white;
        }

        /* Music-themed decorative elements */
        .music-notes {
            position: absolute;
            top: 20%;
            left: 10%;
            opacity: 0.1;
            font-size: 120px;
            animation: float 6s ease-in-out infinite;
        }

        .music-notes-2 {
            position: absolute;
            bottom: 20%;
            right: 10%;
            opacity: 0.1;
            font-size: 80px;
            animation: float 8s ease-in-out infinite reverse;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .logo {
                font-size: 48px;
                margin-bottom: 20px;
            }
            .app-title {
                font-size: 24px;
                margin-bottom: 30px;
            }
            .music-notes,
            .music-notes-2 {
                display: none;
            }
        }
    </style>
</head>
<body>
    <!-- Loading/Splash Screen -->
    <div id="splash">
        <!-- Decorative music notes -->
        <div class="music-notes">â™ªâ™«</div>
        <div class="music-notes-2">â™«â™ª</div>
        
        <!-- Main content -->
        <div class="logo">ðŸŽµ</div>
        <div class="app-title">Music Player</div>
        
        <div class="loading">
            <div class="loading-dot"></div>
            <div class="loading-dot"></div>
            <div class="loading-dot"></div>
        </div>
        
        <div class="loading-text">Loading your music experience...</div>
    </div>

    <!-- Main Application Container -->
    <div id="root"></div>

    <script>
        console.log('ðŸŽµ Music Player - Starting...');
        
        // Fix global variable for compatibility
        if (typeof global === 'undefined') {
            window.global = window;
        }
        
        // Track loading state
        let appLoaded = false;

        // Function to hide splash and show app
        const showApp = () => {
            if (appLoaded) return;
            
            const splash = document.getElementById('splash');
            const root = document.getElementById('root');
            
            if (splash && root) {
                // Smooth transition
                splash.style.transition = 'opacity 0.5s ease-out';
                splash.style.opacity = '0';
                
                setTimeout(() => {
                    splash.style.display = 'none';
                    root.style.display = 'block';
                    appLoaded = true;
                    console.log('ðŸŽµ Music Player - App displayed successfully');
                }, 500);
            }
        };

        // Listen for React app ready signal
        window.addEventListener('react-loaded', () => {
            console.log('ðŸŽµ Music Player - React loaded successfully');
            setTimeout(showApp, 1000); // Small delay for smooth transition
        });

        // Fallback timeout
        setTimeout(() => {
            if (!appLoaded) {
                console.warn('ðŸŽµ Music Player - Loading timeout, forcing display');
                const root = document.getElementById('root');
                if (root && root.children.length > 0) {
                    showApp();
                } else {
                    console.error('ðŸŽµ Music Player - Failed to load properly');
                }
            }
        }, 15000);

        // Enhanced error handling
        window.addEventListener('error', (event) => {
            console.error('ðŸŽµ Music Player - Error:', event.error);
        });

        window.addEventListener('unhandledrejection', (event) => {
            console.error('ðŸŽµ Music Player - Unhandled Promise:', event.reason);
        });

        // Debug helpers
        window.musicPlayerDebug = {
            showApp,
            appLoaded: () => appLoaded,
            version: '1.0.0'
        };
    </script>
</body>
</html>